(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"2ea8":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"flex flex-center bg-grey-6 row"},[e("ListaCardapio"),e("q-page-container",[e("q-page",{attrs:{padding:""}},[e("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,18]}},[e("q-btn",{attrs:{fab:"",icon:"arrow_back",color:"accent"},on:{click:t.back}})],1)],1)],1)],1)},i=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-card",{staticClass:"q-pa-md q-mt-md shadow-7 bg-blue-3 "},[e("q-card-section",[e("div",{staticClass:"text-h6 text-center"},[t._v("Cardápio")])]),e("q-separator",{attrs:{inset:""}}),e("q-scroll-area",{staticStyle:{height:"450px",width:"550px","margin-top":"30px"}},[e("div",{staticClass:"row justify-center"},[t._l(t.produtos,(function(a){return e("q-intersection",{key:a.id,staticClass:"col-4 col-sm-2 col-md-2 produtos",on:{click:function(e){return t.quantidade(a)}}},[e("q-btn",{ref:"produto"+a.id,refInFor:!0,staticClass:"botoesProd ",attrs:{color:"primary",label:a.name,padding:"md","no-caps":"",push:""}},[e("p",{staticClass:"text-caption precoProd"},[t._v(t._s(t._f("capitalize")(a.price)))]),e("p",{directives:[{name:"show",rawName:"v-show",value:a.quantity,expression:"produto.quantity"}]},[t._v("Qnt: "+t._s(a.quantity))])])],1)})),e("q-dialog",{model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("q-card",{staticStyle:{width:"300px"}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v("Produto: "+t._s(t.produto.name))])]),e("q-card-section",{staticClass:"q-pt-none"},[e("q-input",{attrs:{outlined:"",mask:"###",label:"Quantidade"},model:{value:t.produto.quantity,callback:function(a){t.$set(t.produto,"quantity",a)},expression:"produto.quantity"}})],1),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK"},on:{click:t.selecionar}})],1)],1)],1)],2)]),e("q-card-actions",[e("q-btn",{staticClass:"full-width",attrs:{color:"secondary",size:"lg"},on:{click:t.fazerPedido}},[t._v("Fazer Pedido")]),e("FinalizaPedido")],1),e("q-inner-loading",{attrs:{showing:t.loading}},[e("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1)},r=[],d=(e("e6cf"),e("5319"),e("f386")),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("q-dialog",{model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("q-card",{staticStyle:{width:"580px","max-width":"80vw"}},[e("q-card-section",{staticStyle:{"max-height":"50vh"}},[e("div",{staticClass:"text-h6 text-center"},[t._v("Finalizar Pedido")])]),e("q-separator"),e("q-card-section",{staticClass:"q-pt-lg"},[e("q-input",{staticClass:"q-my-sm",attrs:{prefix:"R$: ",outlined:"",disable:"",label:"Total"},model:{value:t.pedido.total,callback:function(a){t.$set(t.pedido,"total",a)},expression:"pedido.total"}}),e("q-input",{staticClass:"q-my-sm",attrs:{prefix:"R$: ",mask:"#.##","fill-mask":"0","reverse-fill-mask":"",outlined:"",label:"Disconto"},model:{value:t.pedido.discount,callback:function(a){t.$set(t.pedido,"discount",a)},expression:"pedido.discount"}}),e("q-input",{staticClass:"q-my-sm",attrs:{prefix:"R$: ",mask:"#.##","fill-mask":"0","reverse-fill-mask":"",outlined:"",label:"Serviço"},model:{value:t.pedido.commission,callback:function(a){t.$set(t.pedido,"commission",a)},expression:"pedido.commission"}}),e("q-input",{staticClass:"q-my-sm",attrs:{outlined:"",label:"Mesa"},model:{value:t.pedido.commands,callback:function(a){t.$set(t.pedido,"commands",a)},expression:"pedido.commands"}})],1),e("q-card-actions",{staticClass:"bg-white text-teal q-px-sm",attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width",attrs:{size:"lg",label:"Finalizar",color:"secondary"},on:{click:t.fazerPedido}})],1)],1)],1)],1)},l=[],c=e("f508"),p={beforeCreate(){d["a"].$on("finalizaPedido",(t=>{this.pedido=t;let a=0;t.products.map((t=>{a+=t.quantity*t.price})),this.pedido.total=a.toFixed(2),this.dialog=!0}))},data(){return{dialog:!1,pedido:{total:0,discount:0,commission:0,commands:0}}},methods:{async fazerPedido(){c["a"].show();try{await this.$axios.post("orders/makeOrder",this.pedido),this.$router.push("/atender"),this.$q.notify({message:"Pedido efetuado com sucesso",color:"green"})}catch(t){this.$q.notify({message:"Falha ao efetuar pedido",color:"red"})}c["a"].hide()}}},u=p,m=e("2877"),h=e("24e8"),f=e("f09f"),g=e("a370"),q=e("eb85"),b=e("27f9"),v=e("4b7e"),y=e("9c40"),x=e("7f67"),C=e("eebe"),w=e.n(C),k=Object(m["a"])(u,n,l,!1,null,null,null),$=k.exports;w()(k,"components",{QDialog:h["a"],QCard:f["a"],QCardSection:g["a"],QSeparator:q["a"],QInput:b["a"],QCardActions:v["a"],QBtn:y["a"]}),w()(k,"directives",{ClosePopup:x["a"]});var Q={components:{FinalizaPedido:$},async created(){this.loading=!0;try{const{data:t}=await this.$axios.get("products/all");this.produtos=t.data}catch(t){console.log(t)}this.loading=!1},data(){return{loading:!1,produtos:[],produtosSelecionados:[],produto:{quantity:!1},dialog:!1,scrollv:!1}},methods:{quantidade(t){"bg-primary"===this.$refs["produto"+t.id][0].$el.classList[7]?(this.produto=t,this.dialog=!0):(this.produto=t,this.selecionar())},selecionar(){this.produtosSelecionados.filter((t=>t.id===this.produto.id)).length<=0?(this.$refs["produto"+this.produto.id][0].$el.classList.replace("bg-primary","bg-secondary"),this.produtosSelecionados.push(this.produto)):(this.produto.quantity=0,this.$refs["produto"+this.produto.id][0].$el.classList.replace("bg-secondary","bg-primary"),this.produtosSelecionados.splice(this.produtosSelecionados.indexOf(this.produto),1))},async fazerPedido(){const t={client_id:localStorage.getItem("cliente_id"),waiter:JSON.parse(localStorage.getItem("waiter")).value,products:this.produtosSelecionados};d["a"].$emit("finalizaPedido",t)}}},S=Q,_=(e("3538"),e("4983")),P=e("ad56"),z=e("74f7"),F=e("cf57"),I=Object(m["a"])(S,s,r,!1,null,null,null),O=I.exports;w()(I,"components",{QCard:f["a"],QCardSection:g["a"],QSeparator:q["a"],QScrollArea:_["a"],QIntersection:P["a"],QBtn:y["a"],QDialog:h["a"],QInput:b["a"],QCardActions:v["a"],QInnerLoading:z["a"],QSpinnerGears:F["a"]}),w()(I,"directives",{ClosePopup:x["a"]});var L={components:{ListaCardapio:O},methods:{back(){this.$router.push("/atender")}}},j=L,N=e("9989"),A=e("09e3"),B=e("de5e"),D=Object(m["a"])(j,o,i,!1,null,null,null);a["default"]=D.exports;w()(D,"components",{QPage:N["a"],QPageContainer:A["a"],QPageSticky:B["a"],QBtn:y["a"]})},3538:function(t,a,e){"use strict";e("783d")},"783d":function(t,a,e){},f386:function(t,a,e){"use strict";var o=e("2b0e");a["a"]=new o["a"]}}]);