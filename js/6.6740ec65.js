(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-center bg-grey-6"},[a("FormClient"),a("q-page-container",[a("q-page",{attrs:{padding:""}},[a("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[a("q-btn",{attrs:{fab:"",icon:"settings",color:"accent"},on:{click:t.admin}})],1)],1)],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticStyle:{width:"500px"},attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-h6 text-center"},[t._v("Iniciar Pedido")])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",{staticStyle:{"padding-bottom":"0"}},[a("q-select",{staticClass:"q-my-sm",attrs:{outlined:"",options:t.options,label:"Funcionario"},model:{value:t.funcionario,callback:function(e){t.funcionario=e},expression:"funcionario"}})],1),a("q-card-section",{staticStyle:{"padding-top":"0"}},[a("q-select",{attrs:{outlined:"","use-input":"",options:t.filterOptions,loading:t.loadingState,hint:t.msgClient,label:"Cliente"},on:{filter:t.buscaCliente},model:{value:t.BuscaClient,callback:function(e){t.BuscaClient=e},expression:"BuscaClient"}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.BuscaClient,expression:"BuscaClient"}],staticClass:"full-width",attrs:{color:"secondary",label:"Fazer Pedido"},on:{click:t.fazerPedido}})],1),a("q-separator",{attrs:{inset:""}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.naoCadastrado,expression:"naoCadastrado"}],staticClass:"row justify-center"},[a("q-card",{staticClass:"bg-blue-1 q-my-lg",staticStyle:{width:"470px"},attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-bold text-center"},[t._v("Novo Cliente")])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("q-input",{attrs:{"bottom-slots":"",outlined:"",label:"Nome",placeholder:"Nome do Cliente..."},model:{value:t.cliente.name,callback:function(e){t.$set(t.cliente,"name",e)},expression:"cliente.name"}}),a("q-input",{attrs:{"bottom-slots":"",type:"email",outlined:"",label:"email",placeholder:"Email do Cliente..."},model:{value:t.cliente.email,callback:function(e){t.$set(t.cliente,"email",e)},expression:"cliente.email"}}),a("q-input",{attrs:{"bottom-slots":"",mask:"(##) # ####-####",outlined:"",label:"Telefone",placeholder:"Telefone do Cliente..."},model:{value:t.cliente.phone,callback:function(e){t.$set(t.cliente,"phone",e)},expression:"cliente.phone"}})],1),a("q-card-section",{staticStyle:{"padding-top":"0"}},[a("q-btn",{staticClass:"full-width",attrs:{color:"secondary"},on:{click:t.cadastraCliente}},[t._v("Cadastrar")])],1)],1)],1)],1)],1)},o=[],l=(a("e6cf"),{async beforeCreate(){try{const{data:t}=await this.$axios.get("waiters/all");t.data.map((t=>{let e={label:t.name,value:t.id};this.options.push(e)})),console.log(this.options)}catch(t){}},data(){var t;return{BuscaClient:null,naoCadastrado:!1,loadingState:!1,msgClient:"",filterOptions:[],funcionario:null!==(t=JSON.parse(localStorage.getItem("waiter")))&&void 0!==t?t:null,options:[],cliente:{name:null,email:null,phone:null}}},methods:{buscaCliente(t,e){e((async()=>{if(""!=t){this.loadingState=!0;try{const{data:e}=await this.$axios.get("clients/findPhone/"+t.toString());e.data.length>0?(this.msgClient="",this.naoCadastrado=!1,e.data.map((t=>{const e={label:t.name,value:t.id},a=this.filterOptions.filter((e=>e.value===t.id));a.length<=0&&this.filterOptions.push(e)}))):(this.msgClient="Cliente nÃ£o Cadastrado",this.filterOptions=[],this.naoCadastrado=!0)}catch(e){console.log(e)}this.loadingState=!1}}))},async cadastraCliente(){try{const{data:t}=await this.$axios.post("clients/new",this.cliente);localStorage.setItem("cliente_id",t.data.id),this.$router.push("/cardapio"),this.$q.notify({message:`Cliente ${t.data.name} cadastrado com suceeso`,color:"green"})}catch(t){this.$q.notify({message:`Falha ao cadastrar Cliente: ${data.data.name}`,color:"red"})}},fazerPedido(){localStorage.setItem("cliente_id",this.BuscaClient.value),localStorage.setItem("waiter",JSON.stringify(this.funcionario)),this.$router.push("/cardapio")}}}),c=l,r=a("2877"),d=a("f09f"),u=a("a370"),p=a("eb85"),m=a("ddd8"),h=a("9c40"),f=a("27f9"),C=a("eebe"),g=a.n(C),b=Object(r["a"])(c,s,o,!1,null,null,null),v=b.exports;g()(b,"components",{QCard:d["a"],QCardSection:u["a"],QSeparator:p["a"],QSelect:m["a"],QBtn:h["a"],QInput:f["a"]});var q={components:{FormClient:v},name:"PageIndex",methods:{admin(){this.$router.push("/")}}},w=q,y=a("9989"),x=a("09e3"),S=a("de5e"),$=Object(r["a"])(w,i,n,!1,null,null,null);e["default"]=$.exports;g()($,"components",{QPage:y["a"],QPageContainer:x["a"],QPageSticky:S["a"],QBtn:h["a"]})}}]);